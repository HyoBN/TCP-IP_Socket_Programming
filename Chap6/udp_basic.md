# UDP의 이론적인 이야기.

## UDP 소켓의 특성
1. 비연결형 서비스를 지원하는 전송계층 프로토콜이다.
2. 데이터 전송 후 상대방의 수신여부를 확인할 수 없다.
3. 데이터의 전송을 '보장'하지 않는다. 분실될 수도 있으며 즉, 신뢰할 수 없다.
4. 프로그래밍의 관점에서 보더라도 TCP보다 구현이 용이하다.
5. 상황에 따라 TCP보다 훨씬 좋은 성능을 발휘한다.
6. 생각만큼 데이터 손실이 자주 발생하는 것은 아니기 때문에 신뢰성보다 성능이 중요시되는 상황에서는 UDP가 좋은 선택이 될 수 있다.
7. **흐름제어(Flow Control)이 존재하지 않는다. (TCP는 흐름제어가 생명이다!)
> 흐름제어 : 송신 측과 수신 측의 데이터 처리 속도 차이를 해결하기 위한 기법.

## UDP의 내부 동작원리
TCP에 비해서 정말 단순하다. 전송만 할 뿐 응답을 하지 않는다.  
호스트 B를 떠난 UDP 패킷이 호스트 A에게 전달되도록 하는 것은 IP의 역할이다.  
이렇게 전달된 UDP '패킷'을 호스트 A 내에 존재하는 UDP'소켓' 중 하나에게 최종 전달하는 것은 UDP의 역할이다. 
**UDP의 가장 중요한 역할은 호스트로 수신된 패킷을 PORT 정보를 참조하여 최종 목적지인 UDP 소켓에 전달하는 것이다.


### TCP가 UDP에 비해 느린 이유.
- 데이터 송수신 이전, 이후에 거치는 연결설정 및 해제과정 존재.
- 데이터 송수신 과정에서 거치는 신뢰성 보장을 위한 흐름제어.

### 따라서, 송수신하는 데이터의 양은 작으면서 잦은 연결이 필요한 경우에는 TCP보다 UDP가 훨씬 효울적이고 빠르게 동작한다.

-------

## UDP 데이터그램(Datagram)

UDP 소켓이 전송하는 패킷을 데이터그램이라고 표현한다.  
데이터그램도 패킷의 일종이지만 TCP 패킷과 달리 데이터의 일부가 아닌, 그 자체가 하나의 데이터로 의미를 가지기 때문에 데이터그램이라 표현한다.
UDP는 데이터의 경계가 존재하기 때문에 하나의 패킷이 하나의 데이터로 간주된다.

--------

## connected UDP 소켓.

> TCP 소켓에는 데이터를 전송할 목적지의 IP와 PORT번호를 등록하는 반면, UDP 소켓에는 등록하지 않는다.

때문에, UDP 소켓에서 sendto 함수를 통해 데이터를 전송하는 과정은 다음과 같이 세 단계로 나뉜다.
 * 1단계. UDP 소켓에 목적지의 IP와 PORT 번호 등록.
 * 2단계. 데이터 전송
 * 3단계. UDP 소켓에 등록된 목적지 정보 삭제.

즉, sendto 함수가 호출될 때마다 위 과정을 반복한다.  
이렇게 목적지의 주소정보를 계속해서 변경하기 때문에 하나의 UDP 소켓을 통해 여러 목적지로 데이터 전송이 가능한 것이다.  
  
목적지 정보가 등록되어 있지 않은 소켓을 unconnected 소켓이라 하고,  
목적지 정보가 등록되어 있는 소켓을 connected 소켓이라 한다.  
  
UDP 소켓은 기본적으로 unconnected 소켓이다.  

### 하나의 호스트(같은 목적지)와 여러 번 송수신하려면 UDP 소켓을 connected로 만드는 것이 효율적이다.





